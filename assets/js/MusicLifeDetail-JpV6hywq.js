var e=(e,t,n)=>new Promise((i,r)=>{var s=e=>{try{d(n.next(e))}catch(t){r(t)}},o=e=>{try{d(n.throw(e))}catch(t){r(t)}},d=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,o);d((n=n.apply(e,t)).next())});import{Y as t,r as n,u as i,j as r}from"./vendor-react-xhcWTtxo.js";import{U as s,m as o}from"./index-czRqZILZ.js";import"./vendor-others-BwC04hQF.js";import"./vendor-ui-28GTjlMA.js";import"./vendor-firebase-Cl2QMYMN.js";function d(){const{id:d}=t(),[l,u]=n.useState(null),[a,h]=n.useState([]),[c,m]=n.useState(""),{user:j}=n.useContext(s),x=i();return n.useEffect(()=>{o.getPost(d).then(u),o.getComments(d).then(h)},[d]),l?r.jsxs("div",{children:[r.jsx("h2",{children:l.title}),r.jsx("div",{children:l.content}),r.jsxs("div",{children:["작성자: ",l.authorName," | 조회수: ",l.viewCount]}),j.uid===l.authorId&&r.jsx("button",{onClick:()=>e(this,null,function*(){window.confirm("정말 삭제하시겠습니까?")&&(yield o.deletePost(d),x("/musiclife"))}),children:"삭제"}),r.jsx("hr",{}),r.jsx("h3",{children:"댓글"}),r.jsxs("form",{onSubmit:t=>e(this,null,function*(){t.preventDefault(),yield o.addComment(d,{content:c,authorId:j.uid,authorName:j.nickname}),m(""),h(yield o.getComments(d))}),children:[r.jsx("input",{value:c,onChange:e=>m(e.target.value),required:!0}),r.jsx("button",{type:"submit",children:"댓글 등록"})]}),r.jsx("ul",{children:a.map(t=>r.jsxs("li",{children:[r.jsx("b",{children:t.authorName}),": ",t.content,j.uid===t.authorId&&r.jsx("button",{onClick:()=>e(this,null,function*(){yield o.deleteComment(d,t.id),h(yield o.getComments(d))}),children:"삭제"})]},t.id))})]}):r.jsx("div",{children:"로딩 중..."})}export{d as default};
